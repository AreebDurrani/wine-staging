From 526cfe34f7c949216d79cf34ed71b3b61bc7c448 Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Sat, 23 May 2020 18:56:12 +1000
Subject: [PATCH] ntoskrnl.exe: Add KeRevertToUserAffinityThreadEx stub

Wine-Bug: https://bugs.winehq.org/show_bug.cgi?id=49222
Signed-off-by: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
---
 dlls/ntoskrnl.exe/ntoskrnl.c        | 7 +++++++
 dlls/ntoskrnl.exe/ntoskrnl.exe.spec | 1 +
 2 files changed, 8 insertions(+)

diff --git a/dlls/ntoskrnl.exe/ntoskrnl.c b/dlls/ntoskrnl.exe/ntoskrnl.c
index bb5fbdbe17c3..ea5ead5c6dce 100644
--- a/dlls/ntoskrnl.exe/ntoskrnl.c
+++ b/dlls/ntoskrnl.exe/ntoskrnl.c
@@ -2477,6 +2477,13 @@ void WINAPI KeRevertToUserAffinityThread(void)
     FIXME("() stub\n");
 }
 
+/***********************************************************************
+ *           KeRevertToUserAffinityThreadEx   (NTOSKRNL.EXE.@)
+ */
+void WINAPI KeRevertToUserAffinityThreadEx(KAFFINITY affinity)
+{
+    FIXME("(%lx) stub\n", affinity);
+}
 
 /***********************************************************************
  *           IoRegisterFileSystem   (NTOSKRNL.EXE.@)
diff --git a/dlls/ntoskrnl.exe/ntoskrnl.exe.spec b/dlls/ntoskrnl.exe/ntoskrnl.exe.spec
index a1e5e28203f5..e0fda1848354 100644
--- a/dlls/ntoskrnl.exe/ntoskrnl.exe.spec
+++ b/dlls/ntoskrnl.exe/ntoskrnl.exe.spec
@@ -618,6 +618,7 @@
 @ stdcall KeResetEvent(ptr)
 @ stub KeRestoreFloatingPointState
 @ stdcall KeRevertToUserAffinityThread()
+@ stdcall KeRevertToUserAffinityThreadEx(long)
 @ stub KeRundownQueue
 @ stub KeSaveFloatingPointState
 @ stub KeSaveStateForHibernate
-- 
2.26.2

